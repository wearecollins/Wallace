application: wallace-01
version: 2
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /
  script: app.application
  login: required
  auth_fail_action: redirect

- url: /js
  static_dir: html_v2/js

- url: /fonts
  static_dir: html_v2/fonts

- url: /fonts/.*\.(otf)$
  static_files: html_v2/fonts/\1
  upload: html_v2/fonts/.*\.(otf)$

- url: /css
  static_dir: html_v2/css

- url: /html
  static_dir: html
  login: required
  auth_fail_action: redirect

- url: /subtitles
  static_dir: html_v2/subtitles
  login: required
  auth_fail_action: redirect

- url: /includes
  static_dir: includes

- url: /blendMaps
  static_dir: html_v2/blendMaps

- url: /normalMaps
  static_dir: html_v2/normalMaps

- url: /normalMaps/(.*\.(gif|png|jpg|mp4))$
  static_files: html_v2/normalMaps/\1
  upload: html_v2/normalMaps/.*\.(gif|png|jpg|mp4)$

- url: /blendMaps/(.*\.(gif|png|jpg|mp4))$
  static_files: html_v2/blendMaps/\1
  upload: html_v2/blendMaps/.*\.(gif|png|jpg|mp4)$

- url: /subtitles/(.*\.(gif|png|jpg|mp4|vtt))$
  static_files: subtitles/\1
  upload: subtitles/.*\.(gif|png|jpg|mp4|vtt)$
  mime_type: video/mp4
  expiration: "7d"

- url: /720p/(.*\.(mp4))$
  static_files: 720p/\1
  upload: 720p/(.*\.(mp4))$
  mime_type: video/mp4
  expiration: "7d"

- url: /720p/(.*\.(webm))$
  static_files: 720p/\1
  upload: 720p/(.*\.(webm))$
  mime_type: video/webm
  expiration: "7d"

- url: /(.*\.(gif|png|jpg|jpeg|mp4|vtt))$
  static_files: html_v2/\1
  upload: html_v2/.*\.(gif|png|jpg|jpeg|mp4)$

- url: /(.*\.(html))$
  static_files: html_v2/\1
  upload: html_v2/.*\.(html)$
  login: required
  auth_fail_action: redirect

- url: /.*
  static_files: html_v2/index\.html
  upload: html_v2/index\.html
  login: required
  auth_fail_action: redirect